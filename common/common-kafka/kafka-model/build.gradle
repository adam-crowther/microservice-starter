plugins {
    id 'java'
    alias pluginLibs.plugins.avro
}

compileJava {
    sourceCompatibility = javaSourceCompatibility
    targetCompatibility = javaTargetCompatibility
    options.compilerArgs += [
            '-Xlint:deprecation'
    ]
}

dependencies {
    implementation libs.apache.avro
    implementation libs.google.guava
    implementation libs.jackson.core
    implementation libs.kafka.avro.serializer
    implementation libs.kafka.clients
}

avro {
    createSetters = false
    gettersReturnOptional = true
    optionalGettersForNullableFieldsOnly = true
    stringType = "String"
    enableDecimalLogicalType = true
    fieldVisibility = "PRIVATE"
}

test {
    useJUnitPlatform()
    testLogging {
        events "passed", "skipped", "failed"
    }
}
plugins {
  id 'java'
  id 'checkstyle'
}

checkstyle {
  toolVersion = '10.9.3'
}

checkstyleMain {
  configFile = file("${rootDir}/config/checkstyle_main.xml")
  ignoreFailures = false
  maxWarnings = 0
  maxErrors = 0
}

checkstyleTest {
  configFile = file("${rootDir}/config/checkstyle_test.xml")
  ignoreFailures = true
}

tasks.withType(Checkstyle).configureEach {
  outputs.upToDateWhen { false }
  exclude '**/presentation/api/**'
  exclude '**/presentation/model/**'
  exclude '**/client/api/**'
  exclude '**/client/model/**'
  exclude '**/client/invoker/**'
  exclude '**/avro/model/**'
}

